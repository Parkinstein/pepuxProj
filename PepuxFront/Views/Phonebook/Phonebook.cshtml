
@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<body>
    <div id="confcontrol" class="control_panel">
        <table>
            <tr>
                <td class="controlcol">
                    <div class="phonebook_list">
                        <div class="phonebook_entry_ul">
                            <b>Персональная телефонная книга</b>
                        </div>
                        <table id="phonebooklist">
                            <thead>
                                <tr>
                                    <th>Фамилия</th>
                                    <th>Имя</th>
                                    <th>Адрес</th>
                                    <th>Телефон</th>
                                </tr>
                            </thead>

                            <tbody>
                                <tr id="name0">
                                    <td>Иванов</td>
                                    <td>Иван</td>
                                    <td>Москва</td>
                                    <td>111</td>
                                </tr>
                                <tr id="name1">
                                    <td>Петров</td>
                                    <td>Пётр</td>
                                    <td>Нижний Новгород</td>
                                    <td>222</td>
                                </tr>
                            </tbody>
                            <!--Fill from DB-->
                        </table>
                    </div>
                    <input id="find" type="button" onclick="" value="Найти" class="phonebook_button" />

                <td class="controlcol">
                    <div id="phonebookfill" class="phonebook_fill">
                        <fieldset>
                            <label class="phonebook_label">Фамилия</label>
                            <input id="Surname" value="" class="form-control phonebook_entry">
                            <label class="phonebook_label">Имя</label>
                            <input id="Name" value="" class="form-control phonebook_entry">
                            <label class="phonebook_label">Адрес</label>
                            <input id="Address" value="" class="form-control phonebook_entry">
                            <label class="phonebook_label">Телефон</label>
                            <input id="Phone" value="" class="form-control phonebook_entry">  
                        </fieldset>
                        <input id="save" type="button" onclick="" value="Сохранить" class="phonebook_button" />
                    </div>
                </td>
            </tr>
        </table>
    </div>
</body>

<script type="text/javascript">
    (function($){
        $('#phonebooklist').slimScroll({
            height: '350px',
            width: '100%',
            margin: '30px',
            size: '7px',
            position: 'right',
            color: '#332383',
            distance: '0px',
        });
    })(jQuery);

    var addedrows = new Array();

    $(document).ready(function () {
        $("#phonebooklist tbody tr").on("click", function (event) {
            var ok = false;
            var theid = $(this).attr('id').replace("name", "");
            var newaddedrows = new Array();
            for (index = 0; index < addedrows.length; ++index) {
                // if already selected then remove
                if (addedrows[index] == theid) {
                    $(this).css("background-color", "#ffccff");
                    // remove from second table :
                    var tr = $("#dest" + theid);
                    tr.css("background-color", "#FF3700");
                    tr.fadeOut(400, function () {
                        tr.remove();
                    });
                    //the boolean
                    ok = true;
                } else {
                    newaddedrows.push(addedrows[index]);
                }
            }
            addedrows = newaddedrows;
            // if no match found then add the row :
            if (ok == false) {
                // retrieve the id of the element to match the id of the new row :
                addedrows.push(theid);
                $(this).css("background-color", "#cacaca");
                $('#destinationtable tr:last').after('<tr id="dest' + theid + '"><td>'
                                               + $(this).find("td").eq(0).html() + '</td><td>'
                                               + $(this).find("td").eq(1).html() + '</td><td>'
                                               + $(this).find("td").eq(2).html() + '</td><td>'
                                               + $(this).find("td").eq(3).html() + '</td><td>'
                                               + $(this).find("td").eq(4).html() + '</td></tr>');
            }
        });
    });
</script>

